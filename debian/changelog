zfs-linux (0.6.5.1-1~vivid) vivid; urgency=low

  [ Richard Yao ]
  * Discard on zvols should not exceed the length of a block

  [ Brian Behlendorf ]
  * Fix NULL as mount(2) syscall data parameter

  [ Ned Bass ]
  * Honor xattr=sa dataset property
  * Tag zfs-0.6.5.1

  [ Darik Horn ]
  * Revert "Add 0004-Discard-on-zvols-should-not-exceed-the-length-of-a-b.patch"

 -- Darik Horn <dajhorn@vanadac.com>  Mon, 21 Sep 2015 20:58:54 -0400

zfs-linux (0.6.5-2~vivid) vivid; urgency=high

  * Add 0004-Discard-on-zvols-should-not-exceed-the-length-of-a-b.patch

 -- Darik Horn <dajhorn@vanadac.com>  Fri, 18 Sep 2015 21:47:47 -0400

zfs-linux (0.6.5-1~vivid) vivid; urgency=low

  [ Tim Chase ]
  * Allocate zfs_znode_cache on the Linux slab

  [ DHE ]
  * Rebuild init scripts on source file updates

  [ Turbo Fredriksson ]
  * Document bookmarks a little better in zfs(8)

  [ Brian Behlendorf ]
  * Mark additional functions as PF_FSTRANS

  [ Chris Dunlap ]
  * Fix io-spare.sh to work with disk vdevs

  [ DHE ]
  * Fix formatting error in zfs(8)

  [ Brian Behlendorf ]
  * Extend PF_FSTRANS critical regions

  [ Tim Chase ]
  * Support the "version" property on volumes via the zfs_prop_get_int() API

  [ Chunwei Chen ]
  * Fix kernel panic due to tsd_exit in ZFS_EXIT(zsb)

  [ cburroughs ]
  * align zfs_autoimport_disable manpage with reality

  [ Ned Bass ]
  * Serialize access to spa->spa_feat_stats nvlist

  [ Paul B. Henson ]
  * 5410 Document -S option to zfs inherit

  [ Justin T. Gibbs ]
  * 5313 Allow I/Os to be aggregated across ZIO priority classes

  [ Isaac Huang ]
  * Memory leak in make_root_vdev()
  * Remove useless variable spa_active_count

  [ Chris Dunlap ]
  * Cleanup ZEDLETs
  * Replace "email" ZEDLETs with "notify" ZEDLETs
  * Add support for Pushbullet notifications
  * Add notification to io-spare.sh
  * Combine data-notify.sh with io-notify.sh

  [ tuxoko ]
  * Fix misuse of input argument in traverse_visitbp

  [ Matthew Ahrens ]
  * Illumos 5134 - if ZFS_DEBUG or debug= is set, libzpool should enable debug prints

  [ Jerry Jelinek ]
  * Illumos 3897 - zfs filesystem and snapshot limits

  [ Alex Reece ]
  * Illumos 3897 - zfs filesystem and snapshot limits (fix leak)

  [ Jorgen Lundman ]
  * Illumos 4975 - missing mutex_destroy() calls in zfs

  [ Alex Reece ]
  * Illumos 4873 - zvol unmap calls can take a very long time for larger datasets

  [ Justin T. Gibbs ]
  * Illumos 5038 - Remove "old-style" flexible array usage in ZFS.

  [ Alex Reece ]
  * Illumos 5095 - panic when adding a duplicate dbuf to dn_dbufs

  [ Justin T. Gibbs ]
  * Illumos 5310 - Remove always true tests for non-NULL ds->ds_phys
  * Illumos 5314 - Remove "dbuf phys" db->db_data pointer aliases in ZFS
  * Illumos 5056 - ZFS deadlock on db_mtx and dn_holds
  * Illumos 5531 - NULL pointer dereference in dsl_prop_get_ds()
  * Illumos 5592 - NULL pointer dereference in dsl_prop_notify_all_cb()

  [ Matthew Ahrens ]
  * Illumos 5812 - assertion failed in zrl_tryenter(): zr_owner==NULL

  [ George Wilson ]
  * Illumos #5244 - zio pipeline callers should explicitly invoke next stage

  [ Jason Zaman ]
  * dmu: fix integer overflows

  [ tuxoko ]
  * Add cond_resched to zfs_zget to prevent infinite loop

  [ Matthew Ahrens ]
  * Illumos 3654,3656

  [ Jerry Jelinek ]
  * Illumos 4901 - zfs filesystem/snapshot limit leaks

  [ Max Grossman ]
  * Illumos 4373 - add block contents print to zstreamdump

  [ Matthew Ahrens ]
  * Illumos 4951 - ZFS administrative commands should use reserved space

  [ Christopher Siden ]
  * Illumos 4951 - ZFS administrative commands (fix)

  [ Turbo Fredriksson ]
  * Add the '-a' option to 'zpool export' (Closes: #3203)

  [ Will Andrews ]
  * Illumos 5814 - bpobj_iterate_impl(): Close a refcount leak iterating on a sublist.

  [ Matthew Ahrens ]
  * Illumos 5808 - spa_check_logs is not necessary on readonly pools
  * Illumos 5820 - verify failed in zio_done(): BP_EQUAL(bp, io_bp_orig)
  * Illumos 5348 - zio_checksum_error() only fills in info if ECKSUM

  [ Chris Dunlop ]
  * Wait for all znodes to be released before tearing down the superblock

  [ Matthew Ahrens ]
  * Illumos 5349 - verify that block pointer is plausible before reading

  [ Chris Dunlop ]
  * arc_evict, arc_evict_ghost: reduce stack usage using kmem_zalloc

  [ Brian Behlendorf ]
  * Remove metaslab_min_alloc_size module option
  * Fix type mismatch on 32-bit systems

  [ Matthew Ahrens ]
  * Illumos 5027 - zfs large block support

  [ Brian Behlendorf ]
  * ztest should randomly change recordsize

  [ David Lamparter ]
  * Safely handle security / ACL failures

  [ Chris Dunlap ]
  * Update ZED copyright boilerplate

  [ Tim Chase ]
  * Linux 2.6.36 compat, use REQ_FAILFAST_MASK and remove pre-2.6.36 support

  [ Alex Reece ]
  * Illumos 5422 - preserve AVL invariants in dn_dbufs

  [ Matthew Ahrens ]
  * Illumos 5350 - clean up code in dnode_sync()
  * Illumos 5351, 5352 - scrub pauses
  * Illumos 5810 - zdb should print details of bpobj

  [ Justin T. Gibbs ]
  * Illumos 5562 - ZFS sa_handle's violate kmem invariants, debug kernels panic on boot
  * Illumos 5393 - spurious failures from dsl_dataset_hold_obj()

  [ Max Grossman ]
  * Illumos 5765 - add support for estimating send stream size with lzc_send_space when source is a bookmark

  [ Brian Behlendorf ]
  * Remove unused 'dsl_pool_t *dp' variable

  [ Antonio Russo ]
  * Relax restriction on zfs_ioc_next_obj() iteration

  [ Jan Sanislo ]
  * Return -ESTALE to force lookup for missing NFS file handles

  [ Tim Chase ]
  * Zdb should be able to open the root dataset

  [ Matthew Ahrens ]
  * Illumos 5243 - zdb -b could be much faster

  [ Alexander Eremin ]
  * Illumos 5847 - libzfs_diff should check zfs_prop_get() return

  [ Tim Chase ]
  * Initialize dbu_tqent in dmu_buf_init_user()

  [ Turbo Fredriksson ]
  * The mount helper mount.zfs MUST be in /sbin (not '$sbindir').

  [ Hajo Möller ]
  * Change 3-digit octal escapes to 4-digit ones

  [ Turbo Fredriksson ]
  * Style check shell scripts

  [ Brian Behlendorf ]
  * Wait in libzfs_init() for the /dev/zfs device
  * Add libzfs_error_init() function
  * Use ExecStartPre to load zfs modules

  [ Turbo Fredriksson ]
  * Base init scripts for SYSV systems
  * SYSV init script fixes.

  [ Ned Bass ]
  * dbuf_try_add_ref minor bug fixes
  * dmu_objset_userquota_get_ids uses dn_bonus unsafely

  [ Turbo Fredriksson ]
  * Improve on the ZFS events documentation

  [ Arne Jansen ]
  * Illumos 5269 - zpool import slow

  [ Matthew Ahrens ]
  * Illumos 5818 - zfs {ref}compressratio is incorrect with 4k sector size

  [ Brian Behlendorf ]
  * Remove unused variable in vdev_add_child()

  [ Tim Chase ]
  * Revert "arc_evict, arc_evict_ghost: reduce stack usage using kmem_zalloc"
  * Revert "fix l2arc compression buffers leak"
  * Revert "Allow arc_evict_ghost() to only evict meta data"
  * Partially revert "Add ddt, ddt_entry, and l2arc_hdr caches"

  [ George Wilson ]
  * Illumos 5369 - arc flags should be an enum

  [ Chris Williamson ]
  * Illumos 5408 - managing ZFS cache devices requires lots of RAM

  [ Prakash Surya ]
  * Illumos 5497 - lock contention on arcs_mtx

  [ Brian Behlendorf ]
  * Add taskq_wait_outstanding() function
  * Use taskq_wait_outstanding() function
  * Make arc_prune() asynchronous

  [ Tim Chase ]
  * Increase arc_c_min to allow safe operation of arc_adapt()

  [ Brian Behlendorf ]
  * Rename cv_wait_interruptible() to cv_wait_sig()
  * Wait interruptibly in prefetch thread

  [ Hajo Möller ]
  * Add -y option to `zpool iostat`

  [ Tim Chase ]
  * 3.12 compat, NUMA-aware per-superblock shrinker

  [ Brian Behlendorf ]
  * Unify mount and share for 'zfs create/clone'

  [ Turbo Fredriksson ]
  * Additional SYSV init script fixes.

  [ Sören Tempel ]
  * Refactor dracut module
  * Force export if it failed the first time
  * Only source '/lib/dracut-lib.sh' if it wasn't so far
  * Update dracut README

  [ Matus Kral ]
  * Linux 4.1 compat: use read_iter() / write_iter()

  [ Brian Behlendorf ]
  * Increase the number of iput taskq threads
  * Add zfs_sb_prune_aliases() function

  [ Etienne Dechamps ]
  * Allocate disk space fairly in the presence of vdevs of unequal size.
  * Document metaslab_aliquot.
  * Make metaslab_aliquot a module parameter.

  [ Richard Yao ]
  * zfsdev_getminor() should check for invalid file handles

  [ Brian Behlendorf ]
  * Add IMPLY() and EQUIV() macros

  [ Prakash Surya ]
  * Illumos 5701 - zpool list reports incorrect "alloc" value for cache devices

  [ Andriy Gapon ]
  * Account for ashift when gathering buffers to be written to l2arc device

  [ Brian Behlendorf ]
  * Update all default taskq settings

  [ George Wilson ]
  * Illumos 5163 - arc should reap range_seg_cache

  [ Matthew Ahrens ]
  * Illumos 5368 - ARC should cache more metadata

  [ Turbo Fredriksson ]
  * Revert "Additional SYSV init script fixes."
  * Additional SYSV init script fixes (3).

  [ Don Brady ]
  * zdb -d has false positive warning when feature@large_blocks=disabled
  * Fix for recent zdb -h | -i crashes (seg fault)

  [ Brian Behlendorf ]
  * Add ziltest.sh

  [ Tim Chase ]
  * Remove l2ad_evict from zfs_l2arc_evict_class

  [ Turbo Fredriksson ]
  * Add /dev/mapper to the list of possible sources for pool devices.

  [ Matthew Ahrens ]
  * Illumos 5175 - implement dmu_read_uio_dbuf() to improve cached read performance

  [ Colin Ian King ]
  * man: fix spelling mistakes in manual

  [ Alek Pinchuk ]
  * Illumos 6033 - arc_adjust() should search MFU lists

  [ Andriy Gapon ]
  * Illumos 5912 - full stream can not be force-received into a dataset if it has a snapshot
  * Illumos 5909 - ensure that shared snap names don't become too long after promotion
  * Illumos 5870 - dmu_recv_end_check() leaks origin_head hold if error happens in drc_force branch
  * Illumos 5946, 5945

  [ Arne Jansen ]
  * Illumos 5981 - Deadlock in dmu_objset_find_dp

  [ Matthew Ahrens ]
  * Illumos 5911 - ZFS "hangs" while deleting file

  [ Alexander Motin ]
  * Illumos 5008 - lock contention (rrw_exit) while running a read only load

  [ Tim Chase ]
  * Prevent reclaim in metaslab preload threads

  [ Turbo Fredriksson ]
  * Initramfs scripts for ZoL.

  [ Brian Behlendorf ]
  * Move dracut directory to contrib

  [ Josef 'Jeff' Sipek ]
  * Illumos 4626 - libzfs memleak in zpool_in_use()
  * Illumos 4745 - fix AVL code misspellings

  [ George Wilson ]
  * Illumos 4966 - zpool list iterator does not update output

  [ Basil Crow ]
  * Illumos 5118 - When verifying or creating a storage pool, error messages only show one device

  [ Jan Kryl ]
  * Illumos 5427 - memory leak in libzfs when doing rollback

  [ Justin T. Gibbs ]
  * Illumos 5661 - ZFS: "compression = on" should use lz4 if feature is enabled

  [ Will Andrews ]
  * Illumos 5813 - zfs_setprop_error(): Handle errno value E2BIG.

  [ Richard Yao ]
  * Fix Xen Virtual Block Device detection

  [ Brian Behlendorf ]
  * Use truncate instead of fallocate in ziltest.sh
  * Disable gcc bool-compare warning
  * Fix switch-bool warning

  [ Boris Protopopov ]
  * Translate sync zio to sync bio

  [ Richard Yao ]
  * Failure of userland copy should return EFAULT

  [ Prasad Joshi ]
  * Illumos 1765 - assert triggered in libzfs_import.c

  [ Alexander Eremin ]
  * Illumos 5610 - zfs clone from different source and target pools produces coredump

  [ Manoj Joseph ]
  * Illumos 5764 - "zfs send -nv" directs output to stderr

  [ Matthew Ahrens ]
  * Illumos 5347 - idle pool may run itself out of space

  [ Brian Behlendorf ]
  * Linux 4.2 compat: bdi_setup_and_register()
  * Linux 4.2 compat: remove bio->bi_cnt access
  * Linux 4.2 compat: follow_link() / put_link()
  * Update inode under range lock

  [ Turbo Fredriksson ]
  * Support parallel build trees (VPATH builds)

  [ Brian Behlendorf ]
  * Add logic to try and recover an inode with an invalid mode
  * Set default _initconfdir directory

  [ Matthew Ahrens ]
  * Illumos 5376 - arc_kmem_reap_now() should not result in clearing arc_no_grow

  [ Prakash Surya ]
  * Illumos 5445 - Add more visibility via arcstats
  * Illumos 5817 - change type of arcs_size from uint64_t to refcount_t

  [ Brian Behlendorf ]
  * Reinstate zfs_arc_p_min_shift
  * Add hdr_recl() reclaim callback
  * Remove double counting HDR_L2ONLY_SIZE
  * Minor style cleanup

  [ Turbo Fredriksson ]
  * Fix some minor issues with the SYSV init and initramfs scripts.
  * Make sure that POOL_IMPORTED is set, unset and checked where appropriate.

  [ Brian Behlendorf ]
  * Check for NULL in dmu_free_long_range_impl()
  * Align thread priority with Linux defaults

  [ Frédéric VANNIÈRE ]
  * Fix build failure with Linux 4.1 and FTRACE

  [ Chunwei Chen ]
  * Fix "BUG: Bad page state" caused by writeback flag

  [ Brian Behlendorf ]
  * Bound zvol_threads module option
  * Update arc_available_memory() to check freemem
  * Update arc_memory_throttle() to check pageout

  [ Chris Dunlap ]
  * Fix whitespace in zed_log_err
  * Rework zed_notify_email for configurable PROG/OPTS

  [ Tim Chase ]
  * ztest: display non-index properties properly at verbose level 6

  [ Chris Dunlop ]
  * Linux 4.1 compat: configure bdi_setup_and_register()
  * Fix build failure with Linux 4.1 and FTRACE

  [ tuxoko ]
  * Add parenthesis to the ternary operator

  [ Richard Yao ]
  * Fix zvol detection

  [ Brian Behlendorf ]
  * Handle zap_lookup() failure in ddt_object_load()
  * Linux 4.2 compat: vfs_rename()

  [ Chunwei Chen ]
  * Add compatibility layer for {kmap,kunmap}_atomic
  * Linux 4.1 compat: loop device on ZFS

  [ Brian Behlendorf ]
  * Limit max_hw_sectors_kb to 16M
  * Check large block feature flag on volumes

  [ Tim Chase ]
  * Allow recovery from corrupted snapshot maps

  [ Andreas Buschmann ]
  * Add extra keyword 'slot' to vdev_id.conf

  [ Tim Chase ]
  * Initialize the taskq entry embedded within struct vdev

  [ Richard Yao ]
  * Some OpenRC dependency logic belongs in mount

  [ loli10K ]
  * Fix small typo

  [ Richard Yao ]
  * Clear QUEUE_FLAG_ADD_RANDOM on zvols

  [ Andrey Vesnovaty ]
  * zfsctl: No need to sync ctldir inodes

  [ Brian Behlendorf ]
  * Linux 3.18 compat: Snapshot auto-mounting
  * Linux 4.2 compat: misc_deregister()

  [ Richard Yao ]
  * Remove blk_queue_physical_block_size() autotools check
  * Remove blk_queue_io_opt() autotools check

  [ tuxoko ]
  * Check for RW_WRITE_HELD in zfs_inactive

  [ Richard Yao ]
  * Disable LBA weighting on files and SSDs

  [ James Lee ]
  * Reorder zfs-* services to allow /var on separate dataset

  [ Brian Behlendorf ]
  * Add spa_slop_shift module option

  [ Tim Chase ]
  * Dbuf hash table should be sized as is the arc hash table

  [ Richard Yao ]
  * VDEV_REQ_FUA should be mapped to REQ_FUA

  [ Brian Behlendorf ]
  * Add temporary mount options

  [ Tim Chase ]
  * Prevent reclaim in the traverse prefetch thread

  [ Richard Yao ]
  * zvol processing should use struct bio
  * Support secure discard on zvols
  * Remove rq_for_each_segment() autotools check
  * Remove rq_is_sync() autotools check
  * Remove blk_end_request() autotools check.
  * Remove blk_requeue_request() autotools check
  * Remove blk_fetch_request() autotools check
  * Remove blk_rq_pos() autotools check
  * Remove blk_rq_bytes()/blk_rq_sectors autotools checks
  * Remove blk_queue_discard() autotools check
  * Remove blk_queue_nonrot() autotools check

  [ Andrey Vesnovaty ]
  * Fix invalid fileid for snapshot root dentry

  [ Brian Behlendorf ]
  * Support accessing .zfs/snapshot via NFS
  * Add dbgmsg kstat

  [ SenH ]
  * Force create /run/sendsigs.omit.d link when starting zed

  [ Richard Yao ]
  * Reintroduce IO accounting on zvols on Linux 3.19+

  [ Brian Behlendorf ]
  * Prefetch start and end of volumes

  [ Arne Jansen ]
  * Illumos 6214 - zpools going south

  [ Brian Behlendorf ]
  * Tag zfs-0.6.5

  [ Darik Horn ]
  * Refresh debian/patches after upstream merge.

  [ Benjamin Staffin ]
  * Add support for systemd systems

 -- Darik Horn <dajhorn@vanadac.com>  Fri, 11 Sep 2015 19:18:52 -0400

zfs-linux (0.6.4.2-1~vivid) vivid; urgency=low

  [ Brian Behlendorf ]
  * Wait in libzfs_init() for the /dev/zfs device
  * Use ExecStartPre to load zfs modules
  * Wait interruptibly in prefetch thread

  [ Tim Chase ]
  * Linux 3.12 compat: NUMA-aware per-superblock shrinker

  [ Matus Kral ]
  * Linux 4.1 compat: use read_iter() / write_iter()

  [ Brian Behlendorf ]
  * Add zfs_sb_prune_aliases() function

  [ Chris Dunlop ]
  * Wait for all znodes to be released before tearing down the superblock

  [ tuxoko ]
  * Add cond_resched to zfs_zget to prevent infinite loop

  [ Ned Bass ]
  * Serialize access to spa->spa_feat_stats nvlist
  * Tag zfs-0.6.4.2

  [ Darik Horn ]
  * Refresh debian/patches after upstream merge.

 -- Darik Horn <dajhorn@vanadac.com>  Thu, 09 Jul 2015 22:42:29 -0400

zfs-linux (0.6.4.1-1~vivid) vivid; urgency=low

  [ Tim Chase ]
  * Allocate zfs_znode_cache on the Linux slab

  [ Brian Behlendorf ]
  * Mark additional functions as PF_FSTRANS

  [ Chris Dunlap ]
  * Fix io-spare.sh to work with disk vdevs

  [ Brian Behlendorf ]
  * Extend PF_FSTRANS critical regions
  * Tag zfs-0.6.4.1

 -- Darik Horn <dajhorn@vanadac.com>  Fri, 24 Apr 2015 16:42:15 -0500

zfs-linux (0.6.4-3~vivid) vivid; urgency=low

  [ SenH ]
  * Fix man zpool property feature_guid

  [ Turbo Fredriksson ]
  * Add information about the -o option to zpool replace

  [ Brian Behlendorf ]
  * Improve differing sector size error

  [ Tim Chase ]
  * Comment the lack of real_LZ4_uncompress()

  [ Dan McDonald ]
  * Illumos #4936 fix potential overflow in lz4

  [ Tim Chase ]
  * Return default value on numeric properties failing the "head check.
  * Document the optional "device" argument for "zpool split"

  [ Garrison Jensen ]
  * Fix comment spelling errors.

  [ Andrew Barnes ]
  * Preserve asize when last mirror child promoted to top-level vdev

  [ Matthew Ahrens ]
  * Illumos #3641 compressed block histograms with zdb

  [ Tim Chase ]
  * Convert zfs_mg_noalloc_threshold to a module parameter and document

  [ George Wilson ]
  * Illumos 4168, 4169, 4170: ztest, zdb and zhack fixes

  [ Richard Yao ]
  * zdb: Introduce -V for verbatim import

  [ Brian Behlendorf ]
  * Fix zil_commit() NULL dereference

  [ Prakash Surya ]
  * Move metaslab_group_alloc_update() call

  [ George Wilson ]
  * Illumos #4101, #4102, #4103, #4105, #4106
  * Illumos #4730 destroy metaslab group taskq
  * Illumos #4756 Fix metaslab_group_preload deadlock

  [ Brian Behlendorf ]
  * zfs_trunc() should use dmu_tx_assign(tx, TXG_WAIT)

  [ Jan Engelhardt ]
  * Do not attempt access beyond the declared end of the dn_blkptr array

  [ Brian Behlendorf ]
  * Revert "Disable GCCs aggressive loop optimization"
  * zpool-create.sh: allow features to be disabled

  [ Turbo Fredriksson ]
  * Initial attempt to document events and payloads.
  * Support '-H' (scripted mode) to 'zpool get' (Closes: #2522)

  [ Brian Behlendorf ]
  * Remove patches directory

  [ Matthew Ahrens ]
  * Illumos 4171, 4172

  [ Max Grossman ]
  * Illumos 4370, 4371

  [ Matthew Ahrens ]
  * Illumos 4368, 4369.
  * Illumos #4374

  [ George Wilson ]
  * Illumos 4754, 4755

  [ Tim Chase ]
  * zed needs libzfs_core

  [ Matthew Ahrens ]
  * Illumos 3835 zfs need not store 2 copies of all metadata
  * Illumos 4757, 4913
  * Illumos 4390 - I/O errors can corrupt space map when deleting fs/vol

  [ Saso Kiselkov ]
  * Illumos 4897 - Space accounting mismatch in L2ARC/zpool

  [ Matthew Ahrens ]
  * Illumos 4881 - zfs send performance regression with embedded data
  * Illumos 4914 - zfs on-disk bookmark structure should be named *_phys_t

  [ Turbo Fredriksson ]
  * Add bash completions by Aneurin Price.

  [ Brian Behlendorf ]
  * Use KM_PUSHPAGE in dsl_dataset_rollback_check()
  * Avoid dynamic allocation of 'search zio'
  * Avoid 128K kmem allocations in mzap_upgrade()
  * Add zfs_iput_async() interface
  * Revert "Revert "Revert "Fix unlink/xattr deadlock"""

  [ Alec Salazar ]
  * Replace __va_list with va_list
  * Avoid PAGESIZE redefinition

  [ Evan Susarret ]
  * Correct autodetection of bootfs property

  [ Richard Yao ]
  * Include sys/taskq.h in linux/vfs_compat.h

  [ Turbo Fredriksson ]
  * Create an 'overlay' property (Closes: #2503)

  [ George Wilson ]
  * Illumos 4976-4984 - metaslab improvements

  [ Tim Chase ]
  * Don't upgrade a metaslab when the pool is not writable

  [ Richard Yao ]
  * Drive database update

  [ Matthew Ahrens ]
  * Illumos 4631 - zvol_get_stats triggering too many reads

  [ Isaac Huang ]
  * Fixed memory leaks in zevent handling

  [ Andrew Hamilton ]
  * 2493 change efi_rescan() to wait longer

  [ Matthew Ahrens ]
  * Illumos 5034 - ARC's buf_hash_table is too small
  * Illumos 4970-4974 - extreme rewind enhancements

  [ Brian Behlendorf ]
  * Retire HAVE_IOCTL_* configure checks

  [ Turbo Fredriksson ]
  * Add a pkgconfig file (Closes: #585)

  [ Brian Behlendorf ]
  * Add a missing > to AUTHORS

  [ Chris Dunlap ]
  * Fix race condition with zed pidfile creation
  * Cleanup zed logging

  [ Ralf Ertzinger ]
  * Change startup mode of ZED

  [ louwrentius ]
  * Change delimiter for ZED email scripts

  [ Dan Swartzendruber ]
  * Improve handling of filesystem versions (Closes: #2616)

  [ Alexey Smirnoff ]
  * Change the default 'zfs_dedup_prefetch' value to '0'

  [ alteriks ]
  * Import zfs pools after cryptsetup

  [ Stanislav Seletskiy ]
  * Fix invalid locking order in rename operation

  [ Alex Reece ]
  * Illumos 5049 - panic when removing log device

  [ ilovezfs ]
  * Fragmentation should display as '-' if spacemap_histogram=disabled

  [ Richard Yao ]
  * Linux AIO Support

  [ Brian Behlendorf ]
  * Add object type checking to zap_lockdir()

  [ George Wilson ]
  * Illumos 5117 - spacemap reallocation can cause corruption

  [ Tim Chase ]
  * Implement fallocate FALLOC_FL_PUNCH_HOLE
  * Document the "readonly" pool property

  [ Brian Behlendorf ]
  * Fix z_teardown_inactive_lock deadlock

  [ Turbo Fredriksson ]
  * Document environment variables for zdb, zfs, zinject and zpool.

  [ Matthew Ahrens ]
  * Illumos 5140 - message about "%recv could not be opened" is printed when booting after crash

  [ Chris Dunlap ]
  * Remove reverse indentation from zed comments.

  [ Ned Bass ]
  * Remove obsolete comment about guard pages

  [ Adam Leventhal ]
  * Illumos 5174 - add sdt probe for blocked read in dbuf_read()

  [ Matthew Ahrens ]
  * Illumos 5177 - remove dead code from dsl_scan.c
  * Illumos 5161 - add tunable for number of metaslabs per vdev

  [ George Wilson ]
  * Illumos 5147 - zpool list -v should show individual disk capacity

  [ Richard Yao ]
  * Properly NULL terminate string in zfs_strcmp_pathname
  * Fix function call with uninitialized value in vdev_inuse
  * lib/libzpool/kernel.c: Assert no owners in rw_destroy()

  [ Matthew Ahrens ]
  * Illumos 5139 - SEEK_HOLE failed to report a hole at end of file
  * Illumos 5135 - zpool_find_import_cached() can use fnvlist_*
  * Illumos 5116 - zpool history -i goes into infinite loop

  [ Alex Reece ]
  * Illumos 4753 - increase number of outstanding async writes when sync task is waiting

  [ Max Grossman ]
  * Illumos 5138 - add tunable for maximum number of blocks freed in one txg

  [ Chris Dunlap ]
  * Fix zed io-spare.sh dash incompatibility
  * Replace zed's use of malloc with calloc
  * Refer to ZED's scripts as ZEDLETs

  [ Tim Chase ]
  * Perform whole-page page truncation for hole-punching under a range lock

  [ Brian Behlendorf ]
  * Make user stack limit configurable

  [ Richard Yao ]
  * Add add_prop_list_default helper
  * zpool import -t should not update cachefile
  * Implement -t option to zpool create for temporary pool names

  [ smh ]
  * FreeBSD PR kern/172259: Fixes zfs receive errors

  [ Andriy Gapon ]
  * zfs send -p send properties only for snapshots that are actually sent

  [ Chris Dunlap ]
  * Obtain advisory lock on ZED PID file
  * Cleanup struct zed_conf vars in zed_conf_destroy

  [ Lukas Wunner ]
  * Amend Dracut module to export ZFS root on shutdown

  [ Matthew Ahrens ]
  * Illumos 5176 - lock contention on godfather zio

  [ Turbo Fredriksson ]
  * Add an example for 'zfs bookmark' to the Example section.

  [ Brian Behlendorf ]
  * Fix CPU_SEQID use in preemptible context
  * Improve VERIFY() error in dmu_write()

  [ Turbo Fredriksson ]
  * Add a stern warning about dedup

  [ Tom Prince ]
  * Install header during post-build rather than post-install.
  * Point dkms build at installed source tree, rather than build directory.

  [ Brian Behlendorf ]
  * Fix source_tree variable in dkms build

  [ Ned Bass ]
  * ztest: print backtrace on SIGSEGV and SIGABRT

  [ Brian Behlendorf ]
  * Make license compatibility checks consistent
  * Update code to use misc_register()/misc_deregister()
  * Remove shrink_dcache_memory() and shrink_icache_memory()
  * Update utsname support
  * Handle NULL mirror child vdev

  [ Darik Horn ]
  * Let `zpool import` ignore a missing hostid record.

  [ Brian Behlendorf ]
  * Suppress AIO kmem warnings

  [ Daniil Lunev ]
  * Illumos 4924 - LZ4 Compression for metadata

  [ Tim Chase ]
  * Don't perform ACL-to-mode translation on empty ACL

  [ Matthew Ahrens ]
  * Illumos 3693 - restore_object uses at least two transactions to restore an object
  * Illumos 5150 - zfs clone of a defer_destroy snapshot causes strangeness
  * Illumos 5162 - zfs recv should use loaned arc buffer to avoid copy

  [ Ned Bass ]
  * Remove checks for mandatory locks

  [ Brian Behlendorf ]
  * Handle block pointers with a corrupt logical size

  [ ilovezfs ]
  * Fix zpool create -t ENOENT bug.

  [ Matthew Ahrens ]
  * Illumos 5178 - zdb -vvvvv on old-format pool fails in dump_deadlist()
  * Illumos 5169-5171 - zdb fixes

  [ Brian Behlendorf ]
  * Fix zdb segfault

  [ Alex Reece ]
  * Illumos 4958 zdb trips assert on pools with ashift >= 0xe

  [ Matthew Ahrens ]
  * Illumos 5164-5165 - space map fixes

  [ Tim Chase ]
  * Linux 3.12 compat: shrinker semantics

  [ Richard Yao ]
  * Kernel header installation should respect --prefix
  * Search /usr/local/src for SPL Object Directory
  * Make directory into which mount.zfs is installed configurable
  * Make systemd-modules-load.service file directory configurable

  [ Alexander Pyhalov ]
  * Fix modules installation directory

  [ Marcel Wysocki ]
  * Add config/compile to config/.gitignore

  [ Dan Swartzendruber ]
  * Improve zvol symlink handling.

  [ Alex Zhuravlev ]
  * Export symbols for ZIL interface

  [ Chris Wedgwood ]
  * Reduce buf/dbuf mutex contention

  [ Isaac Huang ]
  * Fix inaccurate field descriptions
  * Print header properly when terminal resizes

  [ Prakash Surya ]
  * Illumos 5213 - panic in metaslab_init due to space_map_open returning ENXIO

  [ Randall Mason ]
  * Fix small spelling mistake

  [ Ned Bass ]
  * Move a few internal ARC strucutres to arc_impl.h
  * Fix dprintf format specifiers
  * cstyle: allow right paren on its own line

  [ Prakash Surya ]
  * Swap DTRACE_PROBE* with Linux tracepoints

  [ Tim Chase ]
  * Undirty freed spill blocks.

  [ smh ]
  * Prevent ZFS leaking pool free space

  [ Ned Bass ]
  * Fix improper null-byte termination handling
  * Explicitly include SPL compat headers

  [ Isaac Huang ]
  * bio_alloc() with __GFP_WAIT never returns NULL

  [ Dan Swartzendruber ]
  * Fix systemd config for zfs-share.service

  [ Brian Behlendorf ]
  * Fix snapshots with dirty inodes

  [ Dan Swartzendruber ]
  * Improve systemd script to not leave stale sharetab

  [ Jacek Fefliński ]
  * zpool upgrade return errors to stderr instead of stdout

  [ Andy Bakun ]
  * Fix typo in %post scriptlet lines

  [ Boris Protopopov ]
  * Correct error returns to unify cross-pool operation error handling

  [ Brian Behlendorf ]
  * Fix cstyle issue from c66989b

  [ Ned Bass ]
  * vdev_id: use mawk-compatible regular expression

  [ Brian Behlendorf ]
  * Fix zfs_putpage() lock inversion

  [ Ned Bass ]
  * Remove duplicate typedefs from trace.h
  * Don't use AC_LANG_SOURCE for conftest.h source
  * Document zfs_flags module parameter

  [ Brian Behlendorf ]
  * Fix zfs_putpage() lock inversion (again)
  * Mark IO pipeline with PF_FSTRANS

  [ Richard Yao ]
  * Use is_vmalloc_addr() in vdev_disk.c

  [ Brian Behlendorf ]
  * Retire KM_NODEBUG
  * Change KM_PUSHPAGE -> KM_SLEEP
  * Add kmem_cache.h include to default context
  * Revert "Pre-allocate vdev I/O buffers"
  * Revert "SA spill block cache"

  [ Tim Chase ]
  * Linux 3.12 compat: split shrinker has s_shrink

  [ Richard Yao ]
  * Use kmem_vasprintf() in log_internal()

  [ Tim Chase ]
  * Fix removal of SA in sa_modify_attrs()

  [ cburroughs ]
  * Add arc_summary.py from FreeNAS
  * Modified arc_summary.py to run on linux

  [ Kyle Blatter ]
  * Refactor arc_summary to simplify -p processing
  * Add a help option with usage information
  * Force all lines to be 80 columns
  * Replace sysctl summary with tunables summary.

  [ Brian Behlendorf ]
  * Make `zpool import -d|-c` behave consistently

  [ Richard Yao ]
  * Use (void) memcpy(), not (void *) memcpy()

  [ Brian Behlendorf ]
  * Add zvol_open() error handling for readonly property
  * Handle closing an unopened ZVOL

  [ Chris Dunlap ]
  * Protect against adding duplicate strings in ZED
  * Cleanup _zed_event_add_nvpair()

  [ Brian Behlendorf ]
  * Use zio buffers in zil_itx_create()

  [ avg ]
  * fix l2arc compression buffers leak

  [ Tim Chase ]
  * Spurious ENOMEM returns when reading dbufs kstat

  [ Chunwei Chen ]
  * Read spl_hostid module parameter before gethostid()
  * Fix build error when make deb

  [ Brian Behlendorf ]
  * Skip evicting dbufs when walking the dbuf hash

  [ Ned Bass ]
  * Fix SA header size accounting

  [ Justin T. Gibbs ]
  * Illumos 5311 - traverse_dnode may report success when it should not

  [ Lukas Wunner ]
  * Fix loop in Dracut shutdown script
  * Fix Dracut scripts to allow for blanks in pool and dataset names

  [ Brian Behlendorf ]
  * Don't read space maps during import for readonly pools

  [ Tim Chase ]
  * Produce a full snapshot list for zfs send -p

  [ Brian Behlendorf ]
  * Revert "Don't read space maps during import for readonly pools"
  * Use vmem_alloc() for nvlists

  [ Jörg Thalheim ]
  * Linux 3.19 compat: file_inode was added

  [ Brian Behlendorf ]
  * Retire zio_bulk_flags
  * Retire zio_cons()/zio_dest()

  [ Andrey Vesnovaty ]
  * Fix readdir for .zfs/snapshot directory

  [ Brian Behlendorf ]
  * Change VERIFY to ASSERT in mutex_destroy()

  [ Tim Chase ]
  * Enhancements to zpool dry run mode.

  [ Sören Tempel ]
  * Use test(1) in a proper way
  * Write directly to $initdir

  [ Brian Behlendorf ]
  * Skip bad DVAs during free by setting zfs_recover=1

  [ Dan Swartzendruber ]
  * Set zfs_autoimport_disable default value to 1

  [ Steffen Müthing ]
  * Add required files to initramfs
  * Fix error in dracut script if not using ZFS root

  [ Brian Behlendorf ]
  * Fix O_APPEND open(2) flag
  * Retire spl_module_init()/spl_module_fini()

  [ Christer Ekholm ]
  * Fix possible future overflow in zfs_nicenum

  [ Tim Chase ]
  * Avoid dladdr() in ztest

  [ Brian Behlendorf ]
  * Prevent "zpool destroy|export" when suspended

  [ Isaac Huang ]
  * Fix deadlock between zpool export and zfs list

  [ Brian Behlendorf ]
  * Use MUTEX_FSTRANS mutex type
  * Linux 4.0 compat: bdi_setup_and_register()
  * Change ASSERT(!"...") to  cmn_err(CE_PANIC, ...)

  [ Turbo Fredriksson ]
  * Install arc_summary.py

  [ Brian Behlendorf ]
  * Replace zfs.redhat.in with zfs.lsb.in init script

  [ Chris Dunlap ]
  * Add ZED to zfs.redhat.in script

  [ Ned Bass ]
  * Use cached feature info in spa_add_feature_stats()

  [ Hajo Möller ]
  * Actually source /etc/sysconfig/zfs instead of /etc/default/zfs

  [ Brian Behlendorf ]
  * Mark zfs_inactive() with PF_FSTRANS

  [ Josef 'Jeff' Sipek ]
  * Illumos 5047 - don't use atomic_*_nv if you discard the return value

  [ Justin T. Gibbs ]
  * Illumos 5630 - stale bonus buffer in recycled dnode_t leads to data corruption

  [ Bill McGonigle ]
  * Linux 4.0 compat: bdi_setup_and_register() __must_check

  [ Hajo Möller ]
  * Fix warning about AM_INIT_AUTOMAKE arguments

  [ Chunwei Chen ]
  * Use MUTEX_FSTRANS on l2arc_buflist_mtx

  [ Turbo Fredriksson ]
  * Move duplicate information about the 'zfs send -e' option.

  [ Richard Yao ]
  * Increase Linux pipe buffer size on 'zfs receive'

  [ Brian Behlendorf ]
  * Fix arc_meta_max accounting
  * Restructure per-filesystem reclaim
  * Fix arc_adjust_meta() behavior

  [ Chris Dunlop ]
  * Reduce size of zfs_sb_t: allocate z_hold_mtx separately

  [ Isaac Huang ]
  * zio_injection_enabled should not be a module option

  [ Gordan Bobic ]
  * Execute udevadm settle before trying to import pools

  [ Tim Chase ]
  * Set the maximum ZVOL transfer size correctly

  [ Ned Bass ]
  * dbuf_free_range() overzealously frees dbufs

  [ Brian Behlendorf ]
  * Check all vdev labels in 'zpool import'
  * Remove rpm/fedora directory
  * Add RHEL style kmod packages

  [ Ned Bass ]
  * Add NULL guard in zfs_zrlock_class event class
  * zpool import should honor overlay property

  [ Prakash Surya ]
  * Illumos 5695 - dmu_sync'ed holes do not retain birth time

  [ Chris Dunlop ]
  * Align code with Illumos

  [ George Wilson ]
  * Illumos 5694 - traverse_prefetcher does not prefetch enough

  [ Matthew Ahrens ]
  * Illumus 5693 - ztest fails in dbuf_verify: buf[i] == 0, due to dedup and bp_override

  [ Brian Behlendorf ]
  * Update zfs_pd_bytes_max default in zfs(8)

  [ Tim Chase ]
  * Mark all ZPL and ioctl functions as PF_FSTRANS

  [ Brian Behlendorf ]
  * Use vmem_alloc() in spa_config_write()
  * Tag zfs-0.6.4

  [ Darik Horn ]
  * Refresh debian/patches after upstream merge.
  * Package zed separately.
  * Prevent driver modprobe in the zed upstart job.

 -- Darik Horn <dajhorn@vanadac.com>  Thu, 09 Apr 2015 13:04:16 -0500

zfs-linux (0.6.3-15~vivid) vivid; urgency=low

  [ Brian Behlendorf ]
  * Tag zfs-0.6.3-1.2

  [ Darik Horn ]
  * Update gbp.conf for Ubuntu 15.04 Vivid Vervet.

 -- Darik Horn <dajhorn@vanadac.com>  Sat, 21 Feb 2015 13:40:18 -0500
